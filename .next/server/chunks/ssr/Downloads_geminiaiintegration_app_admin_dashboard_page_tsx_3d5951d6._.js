module.exports=[94718,a=>{"use strict";var b=a.i(4939),c=a.i(5350),d=a.i(39425),e=a.i(55066),f=a.i(18726),g=a.i(20931),h=a.i(18382),i=a.i(13366),j=a.i(66013),k=a.i(80348),l=a.i(78137),m=a.i(42634),n=a.i(43443),o=a.i(47954),p=a.i(65573),q=a.i(2300);function r(){let[a,r]=(0,n.useState)([]),[s,t]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{u();let a=()=>{u()};return window.addEventListener("reportsUpdated",a),window.addEventListener("civicbookVotesUpdated",a),()=>{window.removeEventListener("reportsUpdated",a),window.removeEventListener("civicbookVotesUpdated",a)}},[]);let u=()=>{r((0,o.getReportsFromStorage)()),t((0,p.getReportVotingStats)())},v=a.length,w=a.filter(a=>!["completed","verified"].includes(a.status)).length,x=a.filter(a=>["completed","verified"].includes(a.status)&&a.updated_at&&new Date(a.updated_at).toDateString()===new Date().toDateString()).length,y=a.filter(a=>a.needs_human_review).length,z=Array.from(s.values()).reduce((a,b)=>a+b.upvotes+b.downvotes,0),A=Array.from(s.values()).reduce((a,b)=>a+b.upvotes,0),B=Array.from(s.values()).reduce((a,b)=>a+b.downvotes,0),C=Array.from(s.entries()).filter(([a,b])=>b.upvotes>2).length,D=a.slice(0,5).map(a=>({...a,votes:s.get(a.id)||{upvotes:0,downvotes:0},communityScore:(s.get(a.id)?.upvotes||0)-(s.get(a.id)?.downvotes||0)})),E=a.map(a=>{let b=s.get(a.id)||{upvotes:0,downvotes:0};return{...a,votes:b,communityScore:b.upvotes-b.downvotes}}).filter(a=>a.communityScore>0).sort((a,b)=>b.communityScore-a.communityScore).slice(0,5);return(0,b.jsxs)("div",{className:"flex min-h-screen",children:[(0,b.jsx)(c.AdminSidebar,{}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col ml-64 overflow-y-auto",children:[(0,b.jsx)(d.AdminTopNav,{userName:"Demo Admin"}),(0,b.jsxs)("main",{className:"flex-1 p-6 space-y-6 max-w-7xl w-full mx-auto",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Dashboard"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Overview of all civic reports and system metrics"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Open Reports"}),(0,b.jsx)(f.FileText,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:w}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[v," total • ",v>0?Math.round(w/v*100):0,"% open"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Resolved Today"}),(0,b.jsx)(g.CheckCircle2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:x}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Verified and completed"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Avg Resolution Time"}),(0,b.jsx)(h.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["24","h"]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,b.jsx)(j.TrendingUp,{className:"inline h-3 w-3 text-green-500"})," Based on completed reports"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Needs Human Review"}),(0,b.jsx)(i.AlertTriangle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:y}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"AI flagged for review"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)(e.Card,{className:"border-2 border-accent/20",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Community Votes"}),(0,b.jsx)(k.Users,{className:"h-4 w-4 text-accent"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:z}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total community engagement"})]})]}),(0,b.jsxs)(e.Card,{className:"border-2 border-green-500/20",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Validated Issues"}),(0,b.jsx)(l.ThumbsUp,{className:"h-4 w-4 text-green-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:A}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[C," reports with 3+ upvotes"]})]})]}),(0,b.jsxs)(e.Card,{className:"border-2 border-red-500/20",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Flagged as Fake"}),(0,b.jsx)(m.ThumbsDown,{className:"h-4 w-4 text-red-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:B}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Community reported as fake"})]})]})]}),E.length>0&&(0,b.jsxs)(e.Card,{className:"border-2 border-accent/30",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.TrendingUp,{className:"h-5 w-5 text-accent"}),"Top Community-Validated Issues"]}),(0,b.jsx)(e.CardDescription,{children:"Issues with highest community verification scores"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:E.map(a=>(0,b.jsxs)("a",{href:`/admin/reports/${a.id}`,className:"flex items-start gap-4 p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[a.report_images&&a.report_images[0]?(0,b.jsx)("img",{src:a.report_images[0].image_url||"/placeholder.svg",alt:"Report",className:"w-16 h-16 rounded-md object-cover"}):(0,b.jsx)("div",{className:"w-16 h-16 rounded-md bg-muted flex items-center justify-center",children:(0,b.jsx)(f.FileText,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsx)("p",{className:"font-medium line-clamp-2",children:a.complaint_text}),(0,b.jsxs)(q.Badge,{className:"bg-accent shrink-0",children:["+",a.communityScore," Score"]})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[a.profiles?.full_name||"Anonymous"," • ",a.location]}),(0,b.jsxs)("div",{className:"mt-2 flex gap-3 items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(l.ThumbsUp,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:a.votes.upvotes})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(m.ThumbsDown,{className:"h-4 w-4 text-red-500"}),(0,b.jsx)("span",{className:"font-semibold text-red-600 dark:text-red-400",children:a.votes.downvotes})]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"critical"===a.severity_level?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":"high"===a.severity_level?"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200":"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200"}`,children:a.severity_level?.toUpperCase()})]})]})]},a.id))})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Recent Reports"}),(0,b.jsx)(e.CardDescription,{children:"Latest submissions from citizens with community feedback"})]}),(0,b.jsx)(e.CardContent,{children:0===D.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No reports yet. Citizens can submit reports to see them here."}):(0,b.jsx)("div",{className:"space-y-4",children:D.map(a=>(0,b.jsxs)("a",{href:`/admin/reports/${a.id}`,className:"flex items-start gap-4 p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[a.report_images&&a.report_images[0]?(0,b.jsx)("img",{src:a.report_images[0].image_url||"/placeholder.svg",alt:"Report",className:"w-16 h-16 rounded-md object-cover"}):(0,b.jsx)("div",{className:"w-16 h-16 rounded-md bg-muted flex items-center justify-center",children:(0,b.jsx)(f.FileText,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium line-clamp-2",children:a.complaint_text}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[a.profiles?.full_name||"Anonymous"," • ",new Date(a.created_at).toLocaleString()]}),(0,b.jsxs)("div",{className:"mt-2 flex gap-2 flex-wrap items-center",children:[(a.votes.upvotes>0||a.votes.downvotes>0)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs bg-green-50 dark:bg-green-950 px-2 py-1 rounded",children:[(0,b.jsx)(l.ThumbsUp,{className:"h-3 w-3 text-green-600"}),(0,b.jsx)("span",{className:"font-semibold",children:a.votes.upvotes})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs bg-red-50 dark:bg-red-950 px-2 py-1 rounded",children:[(0,b.jsx)(m.ThumbsDown,{className:"h-3 w-3 text-red-600"}),(0,b.jsx)("span",{className:"font-semibold",children:a.votes.downvotes})]}),a.communityScore>0&&(0,b.jsxs)(q.Badge,{variant:"outline",className:"text-xs",children:["Community Score: +",a.communityScore]})]}),a.ai_analysis&&(0,b.jsxs)("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:["AI: ",(100*a.ai_analysis.category_confidence).toFixed(0),"% confident"]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"critical"===a.severity_level?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":"high"===a.severity_level?"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200":"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200"}`,children:a.severity_level?.toUpperCase()})]})]})]},a.id))})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Users,{className:"h-5 w-5"}),"Reports Overview"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold",children:v}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Total reports submitted by citizens"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"AI Processing Stats"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Auto-classified:"}),(0,b.jsxs)("span",{className:"font-medium",children:[v>0?Math.round(a.filter(a=>a.ai_analysis).length/v*100):0,"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"High confidence:"}),(0,b.jsxs)("span",{className:"font-medium",children:[v>0?Math.round(a.filter(a=>a.ai_analysis&&a.ai_analysis.category_confidence>.8).length/v*100):0,"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Critical issues:"}),(0,b.jsx)("span",{className:"font-medium",children:a.filter(a=>"critical"===a.severity_level).length})]})]})]})]})]})]})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=Downloads_geminiaiintegration_app_admin_dashboard_page_tsx_3d5951d6._.js.map