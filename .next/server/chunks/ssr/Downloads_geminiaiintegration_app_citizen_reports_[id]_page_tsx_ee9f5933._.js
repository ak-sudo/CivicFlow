module.exports=[92539,a=>{"use strict";var b=a.i(4939),c=a.i(43443),d=a.i(11894),e=a.i(39912),f=a.i(55066),g=a.i(2300),h=a.i(77248),i=a.i(91730),j=a.i(20931),k=a.i(18382),l=a.i(92638),m=a.i(4175),n=a.i(47954);function o(){let a=(0,d.useParams)().id,o=(0,d.useRouter)(),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!0);if((0,c.useEffect)(()=>{let b=()=>{let b=(0,n.getReportById)(a);b?(q(b),s(!1)):o.push("/citizen/my-reports")};b();let c=()=>{b()};return window.addEventListener("reportsUpdated",c),()=>window.removeEventListener("reportsUpdated",c)},[a,o]),r)return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(e.NavHeader,{userName:"Loading...",unreadCount:0}),(0,b.jsx)("main",{className:"container px-4 md:px-6 py-8",children:(0,b.jsx)("div",{className:"text-center py-12",children:"Loading report details..."})})]});if(!p)return null;let t={submitted:"bg-blue-500/10 text-blue-700",assigned:"bg-purple-500/10 text-purple-700",in_progress:"bg-yellow-500/10 text-yellow-700",completed:"bg-green-500/10 text-green-700",verified:"bg-green-600/10 text-green-800",needs_human_review:"bg-orange-500/10 text-orange-700"};return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(e.NavHeader,{userName:p.profiles?.full_name||"Demo Citizen",unreadCount:0}),(0,b.jsx)("main",{className:"container px-4 md:px-6 py-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:()=>o.back(),children:(0,b.jsx)(l.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Report Details"}),(0,b.jsxs)("p",{className:"text-muted-foreground mt-1",children:["ID: ",p.id.slice(0,8)]})]}),(0,b.jsx)(g.Badge,{variant:"outline",className:t[p.status],children:p.status.replace("_"," ")})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[p.report_images&&p.report_images.length>0&&(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Images"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:p.report_images.map(a=>(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:a.image_url||"/placeholder.svg",alt:"Report",className:"w-full h-64 object-cover rounded-lg"}),(0,b.jsx)(g.Badge,{className:"absolute top-2 right-2",children:a.image_type})]},a.id))})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Issue Description"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-foreground leading-relaxed",children:p.complaint_text})})]}),p.ai_analysis&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"AI Analysis Results"}),(0,b.jsx)(f.CardDescription,{children:"Comprehensive automated assessment"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Detected Category"}),(0,b.jsx)("p",{className:"font-medium capitalize text-lg",children:p.ai_analysis.predicted_category?.replace("_"," ")||"Pending"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"AI Confidence"}),(0,b.jsx)("p",{className:"font-medium text-lg",children:p.ai_analysis.category_confidence?`${Math.round(100*p.ai_analysis.category_confidence)}%`:"N/A"})]})]}),p.ai_analysis.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Description"}),(0,b.jsx)("p",{className:"text-foreground leading-relaxed",children:p.ai_analysis.description})]}),p.ai_analysis.measurements&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Measurements"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[p.ai_analysis.measurements.pothole_depth_cm&&(0,b.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pothole Depth"}),(0,b.jsxs)("p",{className:"font-semibold",children:[p.ai_analysis.measurements.pothole_depth_cm," cm"]})]}),p.ai_analysis.measurements.garbage_volume_cubic_meters&&(0,b.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Garbage Volume"}),(0,b.jsxs)("p",{className:"font-semibold",children:[p.ai_analysis.measurements.garbage_volume_cubic_meters," m³"]})]}),p.ai_analysis.measurements.affected_area_square_meters&&(0,b.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Affected Area"}),(0,b.jsxs)("p",{className:"font-semibold",children:[p.ai_analysis.measurements.affected_area_square_meters," m²"]})]}),p.ai_analysis.measurements.is_dead_animal&&(0,b.jsxs)("div",{className:"p-3 bg-red-500/10 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-red-700",children:"Dead Animal Detected"}),(0,b.jsx)("p",{className:"font-semibold text-red-700",children:"Yes"})]}),p.ai_analysis.measurements.is_low_light_area&&(0,b.jsxs)("div",{className:"p-3 bg-yellow-500/10 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-yellow-700",children:"Low Light Area"}),(0,b.jsx)("p",{className:"font-semibold text-yellow-700",children:"Yes"})]})]})]}),p.ai_analysis.health_risks&&p.ai_analysis.health_risks.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Health Risks"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:p.ai_analysis.health_risks.map((a,c)=>(0,b.jsx)(g.Badge,{variant:"destructive",children:a},c))})]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Resolution Plan"}),(0,b.jsx)(f.CardDescription,{children:"Expected timeline and action steps"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Expected Resolution"}),(0,b.jsx)("p",{className:"font-medium",children:p.ai_analysis.expected_resolution_time||"Pending"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assigned Department"}),(0,b.jsx)("p",{className:"font-medium",children:p.ai_analysis.assigned_department||"Pending"})]})]}),p.ai_analysis.possible_cause&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Possible Cause"}),(0,b.jsx)("p",{className:"text-foreground",children:p.ai_analysis.possible_cause})]}),p.ai_analysis.next_steps&&p.ai_analysis.next_steps.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Next Steps"}),(0,b.jsx)("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:p.ai_analysis.next_steps.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]})]})]}),p.ai_analysis.work_order&&(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Work Order Details"}),(0,b.jsx)(f.CardDescription,{children:"Resource allocation and requirements"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Priority"}),(0,b.jsx)(g.Badge,{variant:"high"===p.ai_analysis.work_order.priority?"destructive":"secondary",children:p.ai_analysis.work_order.priority})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Workers"}),(0,b.jsx)("p",{className:"font-medium",children:p.ai_analysis.work_order.estimated_workers||"TBD"})]}),p.ai_analysis.work_order.estimated_duration_hours&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Duration"}),(0,b.jsxs)("p",{className:"font-medium",children:[p.ai_analysis.work_order.estimated_duration_hours,"h"]})]})]}),p.ai_analysis.work_order.required_equipment&&p.ai_analysis.work_order.required_equipment.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Required Equipment"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:p.ai_analysis.work_order.required_equipment.map((a,c)=>(0,b.jsx)(g.Badge,{variant:"outline",children:a},c))})]}),p.ai_analysis.work_order.safety_precautions&&p.ai_analysis.work_order.safety_precautions.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Safety Precautions"}),(0,b.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:p.ai_analysis.work_order.safety_precautions.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]}),p.ai_analysis.work_order.estimated_cost_inr&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Cost"}),(0,b.jsxs)("p",{className:"font-medium text-lg",children:["₹",p.ai_analysis.work_order.estimated_cost_inr]})]})]})]}),p.ai_analysis.root_cause_analysis&&(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Root Cause Analysis (Issue DNA)"}),(0,b.jsx)(f.CardDescription,{children:"Understanding the underlying problem"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[p.ai_analysis.root_cause_analysis.primary_cause&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-1",children:"Primary Cause"}),(0,b.jsx)("p",{className:"text-foreground",children:p.ai_analysis.root_cause_analysis.primary_cause})]}),p.ai_analysis.root_cause_analysis.contributing_factors&&p.ai_analysis.root_cause_analysis.contributing_factors.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Contributing Factors"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:p.ai_analysis.root_cause_analysis.contributing_factors.map((a,c)=>(0,b.jsx)(g.Badge,{variant:"secondary",children:a},c))})]}),p.ai_analysis.root_cause_analysis.prevention_measures&&p.ai_analysis.root_cause_analysis.prevention_measures.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Prevention Measures"}),(0,b.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:p.ai_analysis.root_cause_analysis.prevention_measures.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[void 0!==p.ai_analysis.root_cause_analysis.recurring_issue&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recurring Issue"}),(0,b.jsx)(g.Badge,{variant:p.ai_analysis.root_cause_analysis.recurring_issue?"destructive":"secondary",children:p.ai_analysis.root_cause_analysis.recurring_issue?"Yes":"No"})]}),void 0!==p.ai_analysis.root_cause_analysis.similar_issues_in_area&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Similar Issues Nearby"}),(0,b.jsx)("p",{className:"font-medium",children:p.ai_analysis.root_cause_analysis.similar_issues_in_area})]})]})]})]}),p.ai_analysis.health_hazard_predictions&&(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Health Hazard Predictions"}),(0,b.jsx)(f.CardDescription,{children:"AI-predicted risk assessments"})]}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Mosquito Breeding Risk"}),(0,b.jsx)(g.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.mosquito_breeding_risk?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.mosquito_breeding_risk})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Contamination Risk"}),(0,b.jsx)(g.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.contamination_risk?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.contamination_risk})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Accident Risk"}),(0,b.jsx)(g.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.accident_risk?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.accident_risk})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Crime Risk (Darkness)"}),(0,b.jsx)(g.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.crime_risk_due_to_darkness?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.crime_risk_due_to_darkness})]})]}),void 0!==p.ai_analysis.health_hazard_predictions.overall_risk_score&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Overall Risk Score"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex-1 bg-muted rounded-full h-3 overflow-hidden",children:(0,b.jsx)("div",{className:`h-full ${p.ai_analysis.health_hazard_predictions.overall_risk_score>75?"bg-red-500":p.ai_analysis.health_hazard_predictions.overall_risk_score>50?"bg-yellow-500":"bg-green-500"}`,style:{width:`${p.ai_analysis.health_hazard_predictions.overall_risk_score}%`}})}),(0,b.jsxs)("span",{className:"font-semibold text-lg",children:[p.ai_analysis.health_hazard_predictions.overall_risk_score,"/100"]})]})]})]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Timeline"}),(0,b.jsx)(f.CardDescription,{children:"Status updates and activity log"})]}),(0,b.jsx)(f.CardContent,{children:p.timeline&&p.timeline.length>0?(0,b.jsx)("div",{className:"space-y-4",children:p.timeline.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${0===c?"bg-primary text-primary-foreground":"bg-muted"}`,children:0===c?(0,b.jsx)(j.CheckCircle2,{className:"h-4 w-4"}):(0,b.jsx)(k.Clock,{className:"h-4 w-4"})}),c<p.timeline.length-1&&(0,b.jsx)("div",{className:"w-px h-full bg-border mt-2"})]}),(0,b.jsxs)("div",{className:"flex-1 pb-4",children:[(0,b.jsx)("p",{className:"font-medium",children:a.action}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.created_at).toLocaleString()}),a.actor_name&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["by ",a.actor_name]})]})]},a.id))}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No activity yet"})})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Information"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,b.jsx)(g.Badge,{variant:"outline",className:t[p.status],children:p.status.replace("_"," ")})]}),p.category&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Category"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:p.category.replace("_"," ")})]}),p.severity_level&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Severity"}),(0,b.jsxs)(g.Badge,{variant:"secondary",className:{low:"bg-green-500/10 text-green-700",medium:"bg-yellow-500/10 text-yellow-700",high:"bg-orange-500/10 text-orange-700",critical:"bg-red-500/10 text-red-700"}[p.severity_level],children:[p.severity_level,p.severity_score&&` (${p.severity_score}/100)`]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Submitted"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,b.jsx)(i.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(p.created_at).toLocaleDateString()})]})]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Location"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(h.MapPin,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-sm",children:p.address||`${p.latitude}, ${p.longitude}`})]})})]}),p.assigned_department&&(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Assignment"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Department"}),(0,b.jsx)("p",{className:"font-medium",children:p.assigned_department})]})})]})]})]})]})})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=Downloads_geminiaiintegration_app_citizen_reports_%5Bid%5D_page_tsx_ee9f5933._.js.map