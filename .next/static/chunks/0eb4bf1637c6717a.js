(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42584,e=>{"use strict";let s=(0,e.i(68385).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],42584)},42972,e=>{"use strict";var s=e.i(51537),a=e.i(52299);function t({className:e,type:t,...r}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>t])},8673,e=>{"use strict";let s="civicflow_reports";function a(){try{let e=localStorage.getItem(s);return e?JSON.parse(e):[]}catch{return[]}}function t(e){try{let t=a();e.timeline||(e.timeline=[{id:`timeline_${Date.now()}`,action:"Report submitted",created_at:new Date().toISOString(),actor_name:e.profiles?.full_name||"Citizen",details:{category:e.category,severity:e.severity_level,ai_confidence:e.ai_analysis?.category_confidence}}]),t.unshift(e),localStorage.setItem(s,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{reports:t}}))}catch(e){console.error("Failed to save report to localStorage:",e)}}function r(e,t){try{let r=a(),i=r.findIndex(s=>s.id===e);if(-1!==i){if(t.status&&t.status!==r[i].status){let e={id:`timeline_${Date.now()}`,action:`Status changed to ${t.status}`,created_at:new Date().toISOString(),actor_name:"completed"===t.status?"Worker":"System"};r[i].timeline=r[i].timeline||[],r[i].timeline.unshift(e)}("completed"===t.status||"verified"===t.status)&&(t.verified_at=new Date().toISOString()),r[i]={...r[i],...t,updated_at:new Date().toISOString()},localStorage.setItem(s,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{reports:r}}))}}catch(e){console.error("Failed to update report in localStorage:",e)}}function i(e){return a().find(s=>s.id===e)||null}e.s(["getReportById",()=>i,"getReportsFromStorage",()=>a,"saveReportToStorage",()=>t,"updateReportInStorage",()=>r])},85258,e=>{"use strict";let s=(0,e.i(68385).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],85258)},82397,e=>{"use strict";let s=(0,e.i(68385).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>s],82397)},11255,7455,26668,28606,15887,74095,e=>{"use strict";var s=e.i(51537),a=e.i(43638),t=e.i(16221),r=e.i(52299),i=e.i(3908),n=e.i(68385);let d=(0,n.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var l=e.i(82397);let o=(0,n.default)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var c=e.i(85258),m=e.i(95658);let x=(0,n.default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);e.s(["Building2",()=>x],7455);let u=(0,n.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>u],26668);let h=(0,n.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>h],28606);let p=(0,n.default)("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);e.s(["ScrollText",()=>p],15887);var g=e.i(48489);function f(){let e=(0,t.usePathname)(),{t:n}=(0,g.useLanguage)(),f=[{name:n("admin.dashboard"),href:"/admin/dashboard",icon:d},{name:n("admin.reports"),href:"/admin/reports",icon:l.FileText},{name:n("admin.map"),href:"/admin/map",icon:o},{name:n("admin.review"),href:"/admin/review",icon:c.AlertCircle},{name:n("admin.workers"),href:"/admin/workers",icon:m.Users},{name:n("admin.departments"),href:"/admin/departments",icon:x},{name:n("admin.analytics"),href:"/admin/analytics",icon:u},{name:n("admin.audit"),href:"/admin/audit",icon:p},{name:n("admin.settings"),href:"/admin/settings",icon:h}];return(0,s.jsxs)("aside",{className:"hidden lg:flex flex-col w-64 pb-3 bg-muted/30 fixed h-screen overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.default,{src:"/civiflow-logo.png",alt:"CivicFlow Logo",width:36,height:36,className:"object-contain"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:n("app.name")}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:n("admin.panel")})]})]})}),(0,s.jsx)("nav",{className:"flex-1 px-4 space-y-1",children:f.map(t=>{let i=e===t.href;return(0,s.jsxs)(a.default,{href:t.href,className:(0,r.cn)("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",i?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[(0,s.jsx)(t.icon,{className:"h-5 w-5"}),t.name]},t.href)})})]})}e.s(["AdminSidebar",()=>f],11255);var j=e.i(80486),v=e.i(42972),y=e.i(32749);let _=(0,n.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var N=e.i(87672),b=e.i(3305),w=e.i(14782),C=e.i(9704);let k=(0,n.default)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);function M(){let{language:e,setLanguage:a}=(0,g.useLanguage)();return(0,s.jsxs)(w.DropdownMenu,{children:[(0,s.jsx)(w.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(j.Button,{variant:"ghost",size:"icon",className:"relative",children:(0,s.jsx)(k,{className:"h-5 w-5"})})}),(0,s.jsxs)(w.DropdownMenuContent,{align:"end",children:[(0,s.jsx)(w.DropdownMenuItem,{onClick:()=>a("en"),className:"en"===e?"bg-accent":"",children:"English"}),(0,s.jsx)(w.DropdownMenuItem,{onClick:()=>a("hi"),className:"hi"===e?"bg-accent":"",children:"हिंदी (Hindi)"})]})]})}var S=e.i(58987),A=e.i(8673),D=e.i(63565),R=e.i(2009),P=e.i(21359),I=e.i(16216),T=e.i(39858),z=e.i(58008),B=e.i(81701),L=e.i(85617),E=e.i(51550),O=e.i(84348),F=e.i(84085),H=e.i(67746),q=e.i(4541),U=e.i(26889),V=e.i(26452),$="Popover",[J,K]=(0,P.createContextScope)($,[L.createPopperScope]),W=(0,L.createPopperScope)(),[Y,Z]=J($),G=e=>{let{__scopePopover:a,children:t,open:r,defaultOpen:i,onOpenChange:n,modal:d=!1}=e,l=W(a),o=S.useRef(null),[c,m]=S.useState(!1),[x=!1,u]=(0,q.useControllableState)({prop:r,defaultProp:i,onChange:n});return(0,s.jsx)(L.Root,{...l,children:(0,s.jsx)(Y,{scope:a,contentId:(0,B.useId)(),triggerRef:o,open:x,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(e=>!e),[u]),hasCustomAnchor:c,onCustomAnchorAdd:S.useCallback(()=>m(!0),[]),onCustomAnchorRemove:S.useCallback(()=>m(!1),[]),modal:d,children:t})})};G.displayName=$;var Q="PopoverAnchor";S.forwardRef((e,a)=>{let{__scopePopover:t,...r}=e,i=Z(Q,t),n=W(t),{onCustomAnchorAdd:d,onCustomAnchorRemove:l}=i;return S.useEffect(()=>(d(),()=>l()),[d,l]),(0,s.jsx)(L.Anchor,{...n,...r,ref:a})}).displayName=Q;var X="PopoverTrigger",ee=S.forwardRef((e,a)=>{let{__scopePopover:t,...r}=e,i=Z(X,t),n=W(t),d=(0,R.useComposedRefs)(a,i.triggerRef),l=(0,s.jsx)(F.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":em(i.open),...r,ref:d,onClick:(0,D.composeEventHandlers)(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:(0,s.jsx)(L.Anchor,{asChild:!0,...n,children:l})});ee.displayName=X;var es="PopoverPortal",[ea,et]=J(es,{forceMount:void 0}),er=e=>{let{__scopePopover:a,forceMount:t,children:r,container:i}=e,n=Z(es,a);return(0,s.jsx)(ea,{scope:a,forceMount:t,children:(0,s.jsx)(O.Presence,{present:t||n.open,children:(0,s.jsx)(E.Portal,{asChild:!0,container:i,children:r})})})};er.displayName=es;var ei="PopoverContent",en=S.forwardRef((e,a)=>{let t=et(ei,e.__scopePopover),{forceMount:r=t.forceMount,...i}=e,n=Z(ei,e.__scopePopover);return(0,s.jsx)(O.Presence,{present:r||n.open,children:n.modal?(0,s.jsx)(ed,{...i,ref:a}):(0,s.jsx)(el,{...i,ref:a})})});en.displayName=ei;var ed=S.forwardRef((e,a)=>{let t=Z(ei,e.__scopePopover),r=S.useRef(null),i=(0,R.useComposedRefs)(a,r),n=S.useRef(!1);return S.useEffect(()=>{let e=r.current;if(e)return(0,U.hideOthers)(e)},[]),(0,s.jsx)(V.RemoveScroll,{as:H.Slot,allowPinchZoom:!0,children:(0,s.jsx)(eo,{...e,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,D.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),n.current||t.triggerRef.current?.focus()}),onPointerDownOutside:(0,D.composeEventHandlers)(e.onPointerDownOutside,e=>{let s=e.detail.originalEvent,a=0===s.button&&!0===s.ctrlKey;n.current=2===s.button||a},{checkForDefaultPrevented:!1}),onFocusOutside:(0,D.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),el=S.forwardRef((e,a)=>{let t=Z(ei,e.__scopePopover),r=S.useRef(!1),i=S.useRef(!1);return(0,s.jsx)(eo,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||t.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,"pointerdown"===s.detail.originalEvent.type&&(i.current=!0));let a=s.target;t.triggerRef.current?.contains(a)&&s.preventDefault(),"focusin"===s.detail.originalEvent.type&&i.current&&s.preventDefault()}})}),eo=S.forwardRef((e,a)=>{let{__scopePopover:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:n,disableOutsidePointerEvents:d,onEscapeKeyDown:l,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:m,...x}=e,u=Z(ei,t),h=W(t);return(0,T.useFocusGuards)(),(0,s.jsx)(z.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:n,children:(0,s.jsx)(I.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:o,onFocusOutside:c,onDismiss:()=>u.onOpenChange(!1),children:(0,s.jsx)(L.Content,{"data-state":em(u.open),role:"dialog",id:u.contentId,...h,...x,ref:a,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ec="PopoverClose";function em(e){return e?"open":"closed"}function ex({...e}){return(0,s.jsx)(G,{"data-slot":"popover",...e})}function eu({...e}){return(0,s.jsx)(ee,{"data-slot":"popover-trigger",...e})}function eh({className:e,align:a="center",sideOffset:t=4,...i}){return(0,s.jsx)(er,{children:(0,s.jsx)(en,{"data-slot":"popover-content",align:a,sideOffset:t,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...i})})}S.forwardRef((e,a)=>{let{__scopePopover:t,...r}=e,i=Z(ec,t);return(0,s.jsx)(F.Primitive.button,{type:"button",...r,ref:a,onClick:(0,D.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})}).displayName=ec,S.forwardRef((e,a)=>{let{__scopePopover:t,...r}=e,i=W(t);return(0,s.jsx)(L.Arrow,{...i,...r,ref:a})}).displayName="PopoverArrow";var ep=e.i(22869);function eg({userName:e,unreadCount:a,onSearch:r}){let i=(0,t.useRouter)(),{t:n}=(0,g.useLanguage)(),[d,l]=(0,S.useState)(""),[o,c]=(0,S.useState)([]),[m,x]=(0,S.useState)(a||0);return(0,S.useEffect)(()=>{let e=()=>{let e=(0,A.getReportsFromStorage)().filter(e=>{let s=new Date(e.created_at);return(new Date().getTime()-s.getTime())/1e3/60<60}).map(e=>({id:e.id,title:`New Report: ${e.category||"Unknown"}`,message:e.complaint_text.slice(0,80)+"...",created_at:e.created_at,type:"new_report",severity:e.severity_level}));c(e),x(e.length)};e();let s=()=>{e()};return window.addEventListener("reportsUpdated",s),()=>window.removeEventListener("reportsUpdated",s)},[]),(0,s.jsx)("header",{className:"sticky top-0 z-40 border-b border-border bg-background",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-4 flex-1 max-w-2xl",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r&&r(d)},className:"relative flex-1",children:[(0,s.jsx)(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(v.Input,{placeholder:n("search.placeholder"),className:"pl-9",value:d,onChange:e=>l(e.target.value)})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(M,{}),(0,s.jsxs)(ex,{children:[(0,s.jsx)(eu,{asChild:!0,children:(0,s.jsxs)(j.Button,{variant:"ghost",size:"icon",className:"relative",children:[(0,s.jsx)(y.Bell,{className:"h-5 w-5"}),m>0&&(0,s.jsx)(C.Badge,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:m})]})}),(0,s.jsxs)(eh,{className:"w-80 p-0",align:"end",children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Notifications"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[m," new notifications"]})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===o.length?(0,s.jsx)("div",{className:"p-8 text-center text-sm text-muted-foreground",children:"No new notifications"}):o.map(e=>(0,s.jsx)("div",{className:"p-4 border-b hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>i.push(`/admin/reports/${e.id}`),children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(y.Bell,{className:"h-4 w-4 text-primary mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleString()})]}),e.severity&&(0,s.jsx)(C.Badge,{variant:"secondary",className:"critical"===e.severity?"bg-red-500/10 text-red-700":"high"===e.severity?"bg-orange-500/10 text-orange-700":"bg-yellow-500/10 text-yellow-700",children:e.severity})]})},e.id))})]})]}),(0,s.jsxs)(w.DropdownMenu,{children:[(0,s.jsx)(w.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsxs)(j.Button,{variant:"ghost",className:"gap-2",children:[(0,s.jsx)(N.User,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"hidden md:inline",children:e})]})}),(0,s.jsxs)(w.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,s.jsx)(w.DropdownMenuLabel,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:n("admin.panel")})]})}),(0,s.jsx)(w.DropdownMenuSeparator,{}),(0,s.jsxs)(w.DropdownMenuItem,{onClick:()=>i.push("/"),className:"text-destructive",children:[(0,s.jsx)(b.LogOut,{className:"mr-2 h-4 w-4"}),n("action.logout")]})]})]}),(0,s.jsx)(ep.RoleSwitcher,{})]})]})})}e.s(["AdminTopNav",()=>eg],74095)},31161,e=>{"use strict";let s=(0,e.i(68385).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],31161)},15876,e=>{"use strict";let s=(0,e.i(68385).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],15876)},52234,e=>{"use strict";let s=(0,e.i(68385).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],52234)},81987,e=>{"use strict";var s=e.i(51537),a=e.i(58987),t=e.i(16221),r=e.i(11255),i=e.i(74095),n=e.i(98121),d=e.i(9704),l=e.i(42584),o=e.i(31161),c=e.i(52234),m=e.i(15876),x=e.i(80486),u=e.i(8673);function h(){let e=(0,t.useParams)().id,h=(0,t.useRouter)(),[p,g]=(0,a.useState)(null),[f,j]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let s=()=>{let s=(0,u.getReportById)(e);s?(g(s),j(!1)):h.push("/admin/reports")};s();let a=()=>s();return window.addEventListener("reportsUpdated",a),()=>window.removeEventListener("reportsUpdated",a)},[e,h]),f)?(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(r.AdminSidebar,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col ml-64 overflow-y-auto",children:[(0,s.jsx)(i.AdminTopNav,{userName:"Admin"}),(0,s.jsx)("main",{className:"flex-1 p-6",children:(0,s.jsx)("div",{className:"text-center py-12",children:"Loading report details..."})})]})]}):p?(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(r.AdminSidebar,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col ml-64 overflow-y-auto",children:[(0,s.jsx)(i.AdminTopNav,{userName:"Admin User"}),(0,s.jsx)("main",{className:"flex-1 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(x.Button,{variant:"ghost",size:"icon",onClick:()=>h.push("/admin/reports"),children:(0,s.jsx)(c.ArrowLeft,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Report Details"}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-1",children:["ID: ",p.id.slice(0,12)]})]}),(0,s.jsx)(d.Badge,{variant:"outline",className:{submitted:"bg-blue-500/10 text-blue-700",assigned:"bg-purple-500/10 text-purple-700",in_progress:"bg-yellow-500/10 text-yellow-700",completed:"bg-green-500/10 text-green-700",verified:"bg-green-600/10 text-green-800",needs_human_review:"bg-orange-500/10 text-orange-700"}[p.status],children:p.status.replace("_"," ")}),p.severity_level&&(0,s.jsx)(d.Badge,{variant:"outline",className:{low:"bg-green-500/10 text-green-700",medium:"bg-yellow-500/10 text-yellow-700",high:"bg-orange-500/10 text-orange-700",critical:"bg-red-500/10 text-red-700"}[p.severity_level],children:p.severity_level})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[p.report_images&&p.report_images.length>0&&(0,s.jsxs)(n.Card,{children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsx)(n.CardTitle,{children:"Issue Images"})}),(0,s.jsx)(n.CardContent,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:p.report_images.map(e=>(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("img",{src:e.image_url||"/placeholder.svg",alt:"Report",className:"w-full h-64 object-cover rounded-lg"})},e.id))})})]}),(0,s.jsxs)(n.Card,{children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsx)(n.CardTitle,{children:"Issue Description"})}),(0,s.jsx)(n.CardContent,{children:(0,s.jsx)("p",{className:"text-foreground leading-relaxed",children:p.complaint_text})})]}),p.ai_analysis&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"AI Analysis Results"}),(0,s.jsx)(n.CardDescription,{children:"Comprehensive automated assessment"})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Detected Category"}),(0,s.jsx)("p",{className:"font-medium capitalize text-lg",children:p.ai_analysis.predicted_category?.replace("_"," ")||"Pending"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"AI Confidence"}),(0,s.jsx)("p",{className:"font-medium text-lg",children:p.ai_analysis.category_confidence?`${Math.round(100*p.ai_analysis.category_confidence)}%`:"N/A"})]})]}),p.ai_analysis.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"AI Description"}),(0,s.jsx)("p",{className:"text-foreground leading-relaxed",children:p.ai_analysis.description})]}),p.ai_analysis.measurements&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-3",children:"Measurements"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[p.ai_analysis.measurements.pothole_depth_cm&&(0,s.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pothole Depth"}),(0,s.jsxs)("p",{className:"font-semibold",children:[p.ai_analysis.measurements.pothole_depth_cm," cm"]})]}),p.ai_analysis.measurements.garbage_volume_cubic_meters&&(0,s.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Garbage Volume"}),(0,s.jsxs)("p",{className:"font-semibold",children:[p.ai_analysis.measurements.garbage_volume_cubic_meters," m³"]})]}),p.ai_analysis.measurements.affected_area_square_meters&&(0,s.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Affected Area"}),(0,s.jsxs)("p",{className:"font-semibold",children:[p.ai_analysis.measurements.affected_area_square_meters," m²"]})]}),p.ai_analysis.measurements.is_dead_animal&&(0,s.jsxs)("div",{className:"p-3 bg-red-500/10 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-red-700",children:"Dead Animal Detected"}),(0,s.jsx)("p",{className:"font-semibold text-red-700",children:"Yes"})]}),p.ai_analysis.measurements.is_low_light_area&&(0,s.jsxs)("div",{className:"p-3 bg-yellow-500/10 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-yellow-700",children:"Low Light Area"}),(0,s.jsx)("p",{className:"font-semibold text-yellow-700",children:"Yes"})]})]})]}),p.ai_analysis.health_risks&&p.ai_analysis.health_risks.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Health Risks"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:p.ai_analysis.health_risks.map((e,a)=>(0,s.jsx)(d.Badge,{variant:"destructive",children:e},a))})]})]})]}),(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"Resolution Plan"}),(0,s.jsx)(n.CardDescription,{children:"Expected timeline and action steps"})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Expected Resolution"}),(0,s.jsx)("p",{className:"font-medium",children:p.ai_analysis.expected_resolution_time||"Pending"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assigned Department"}),(0,s.jsx)("p",{className:"font-medium",children:p.ai_analysis.assigned_department||"Pending"})]})]}),p.ai_analysis.possible_cause&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Possible Cause"}),(0,s.jsx)("p",{className:"text-foreground",children:p.ai_analysis.possible_cause})]}),p.ai_analysis.next_steps&&p.ai_analysis.next_steps.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Action Steps"}),(0,s.jsx)("ol",{className:"list-decimal list-inside space-y-1.5 text-sm",children:p.ai_analysis.next_steps.map((e,a)=>(0,s.jsx)("li",{className:"leading-relaxed",children:e},a))})]})]})]}),p.ai_analysis.work_order&&(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"Work Order Details"}),(0,s.jsx)(n.CardDescription,{children:"Resource allocation and cost estimates"})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Priority"}),(0,s.jsx)(d.Badge,{variant:"high"===p.ai_analysis.work_order.priority?"destructive":"secondary",className:"mt-1",children:p.ai_analysis.work_order.priority})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Workers Needed"}),(0,s.jsx)("p",{className:"font-medium text-lg",children:p.ai_analysis.work_order.estimated_workers||"TBD"})]}),p.ai_analysis.work_order.estimated_duration_hours&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Duration"}),(0,s.jsxs)("p",{className:"font-medium text-lg",children:[p.ai_analysis.work_order.estimated_duration_hours,"h"]})]})]}),p.ai_analysis.work_order.estimated_cost_inr&&(0,s.jsxs)("div",{className:"p-4 bg-primary/5 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Cost"}),(0,s.jsxs)("p",{className:"font-bold text-2xl text-primary",children:["₹",p.ai_analysis.work_order.estimated_cost_inr.toLocaleString("en-IN")]})]}),p.ai_analysis.work_order.required_equipment&&p.ai_analysis.work_order.required_equipment.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Required Equipment"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:p.ai_analysis.work_order.required_equipment.map((e,a)=>(0,s.jsx)(d.Badge,{variant:"outline",children:e},a))})]}),p.ai_analysis.work_order.safety_precautions&&p.ai_analysis.work_order.safety_precautions.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Safety Precautions"}),(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:p.ai_analysis.work_order.safety_precautions.map((e,a)=>(0,s.jsx)("li",{className:"leading-relaxed",children:e},a))})]}),p.ai_analysis.work_order.municipal_staff_instructions&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Staff Instructions"}),(0,s.jsx)("p",{className:"text-sm leading-relaxed",children:p.ai_analysis.work_order.municipal_staff_instructions})]})]})]}),p.ai_analysis.root_cause_analysis&&(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"Root Cause Analysis (Issue DNA)"}),(0,s.jsx)(n.CardDescription,{children:"Understanding the underlying problem"})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-4",children:[p.ai_analysis.root_cause_analysis.primary_cause&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-1",children:"Primary Cause"}),(0,s.jsx)("p",{className:"text-foreground leading-relaxed",children:p.ai_analysis.root_cause_analysis.primary_cause})]}),p.ai_analysis.root_cause_analysis.contributing_factors&&p.ai_analysis.root_cause_analysis.contributing_factors.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Contributing Factors"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:p.ai_analysis.root_cause_analysis.contributing_factors.map((e,a)=>(0,s.jsx)(d.Badge,{variant:"secondary",children:e},a))})]}),p.ai_analysis.root_cause_analysis.prevention_measures&&p.ai_analysis.root_cause_analysis.prevention_measures.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium mb-2",children:"Prevention Measures"}),(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1.5 text-sm",children:p.ai_analysis.root_cause_analysis.prevention_measures.map((e,a)=>(0,s.jsx)("li",{className:"leading-relaxed",children:e},a))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[void 0!==p.ai_analysis.root_cause_analysis.recurring_issue&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recurring Issue"}),(0,s.jsx)(d.Badge,{variant:p.ai_analysis.root_cause_analysis.recurring_issue?"destructive":"secondary",className:"mt-1",children:p.ai_analysis.root_cause_analysis.recurring_issue?"Yes":"No"})]}),void 0!==p.ai_analysis.root_cause_analysis.similar_issues_in_area&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Similar Issues Nearby"}),(0,s.jsx)("p",{className:"font-medium text-lg",children:p.ai_analysis.root_cause_analysis.similar_issues_in_area})]})]})]})]}),p.ai_analysis.health_hazard_predictions&&(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.AlertTriangle,{className:"h-5 w-5 text-orange-500"}),"Health Hazard Predictions"]})}),(0,s.jsx)(n.CardDescription,{children:"AI-predicted risk assessments"})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Mosquito Breeding Risk"}),(0,s.jsx)(d.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.mosquito_breeding_risk?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.mosquito_breeding_risk||"Low"})]}),(0,s.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Contamination Risk"}),(0,s.jsx)(d.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.contamination_risk?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.contamination_risk||"Low"})]}),(0,s.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Accident Risk"}),(0,s.jsx)(d.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.accident_risk?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.accident_risk||"Low"})]}),(0,s.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Crime Prone"}),(0,s.jsx)(d.Badge,{variant:"high"===p.ai_analysis.health_hazard_predictions.crime_prone_area?"destructive":"secondary",children:p.ai_analysis.health_hazard_predictions.crime_prone_area||"Low"})]})]})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(n.Card,{children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsx)(n.CardTitle,{children:"Report Information"})}),(0,s.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Reported By"}),(0,s.jsx)("p",{className:"font-medium",children:p.profiles?.full_name||"Anonymous"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Location"}),(0,s.jsxs)("p",{className:"font-medium flex items-start gap-2",children:[(0,s.jsx)(l.MapPin,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,s.jsx)("span",{children:p.address||"Location not provided"})]})]}),p.geotag_latitude&&p.geotag_longitude&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Coordinates"}),(0,s.jsxs)("p",{className:"font-medium text-sm",children:[p.geotag_latitude.toFixed(6),", ",p.geotag_longitude.toFixed(6)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Submitted On"}),(0,s.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(o.Calendar,{className:"h-4 w-4"}),new Date(p.created_at).toLocaleString()]})]}),p.category&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Category"}),(0,s.jsx)(d.Badge,{variant:"secondary",className:"capitalize",children:p.category.replace("_"," ")})]})]})]}),p.timeline&&p.timeline.length>0&&(0,s.jsxs)(n.Card,{children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsx)(n.CardTitle,{children:"Activity Timeline"})}),(0,s.jsx)(n.CardContent,{children:(0,s.jsx)("div",{className:"space-y-4",children:p.timeline.map(e=>(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"}),(0,s.jsx)("div",{className:"w-px flex-1 bg-border"})]}),(0,s.jsxs)("div",{className:"flex-1 pb-4",children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:e.action}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.actor_name&&`By ${e.actor_name} • `,new Date(e.created_at).toLocaleString()]})]})]},e.id))})})]})]})]})]})})]})]}):null}e.s(["default",()=>h])}]);