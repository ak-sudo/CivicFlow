(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8673,e=>{"use strict";let t="civicflow_reports";function s(){try{let e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch{return[]}}function r(e){try{let r=s();e.timeline||(e.timeline=[{id:`timeline_${Date.now()}`,action:"Report submitted",created_at:new Date().toISOString(),actor_name:e.profiles?.full_name||"Citizen",details:{category:e.category,severity:e.severity_level,ai_confidence:e.ai_analysis?.category_confidence}}]),r.unshift(e),localStorage.setItem(t,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{reports:r}}))}catch(e){console.error("Failed to save report to localStorage:",e)}}function i(e,r){try{let i=s(),a=i.findIndex(t=>t.id===e);if(-1!==a){if(r.status&&r.status!==i[a].status){let e={id:`timeline_${Date.now()}`,action:`Status changed to ${r.status}`,created_at:new Date().toISOString(),actor_name:"completed"===r.status?"Worker":"System"};i[a].timeline=i[a].timeline||[],i[a].timeline.unshift(e)}("completed"===r.status||"verified"===r.status)&&(r.verified_at=new Date().toISOString()),i[a]={...i[a],...r,updated_at:new Date().toISOString()},localStorage.setItem(t,JSON.stringify(i)),window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{reports:i}}))}}catch(e){console.error("Failed to update report in localStorage:",e)}}function a(e){return s().find(t=>t.id===e)||null}e.s(["getReportById",()=>a,"getReportsFromStorage",()=>s,"saveReportToStorage",()=>r,"updateReportInStorage",()=>i])},42584,e=>{"use strict";let t=(0,e.i(68385).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],42584)},82397,e=>{"use strict";let t=(0,e.i(68385).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],82397)},31161,e=>{"use strict";let t=(0,e.i(68385).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],31161)},64490,e=>{"use strict";var t=e.i(51537),s=e.i(43638),r=e.i(80486),i=e.i(32749),a=e.i(87672),n=e.i(3305),l=e.i(52264),o=e.i(14782),c=e.i(9704),d=e.i(73183),m=e.i(16221),x=e.i(3908),h=e.i(22869);function u({userName:e,unreadCount:u=0}){let p=(0,m.useRouter)(),f=async()=>{let e=(0,d.createClient)();await e.auth.signOut(),p.push("/")};return(0,t.jsx)("header",{className:"sticky top-0 z-40 border-b border-border bg-background",children:(0,t.jsxs)("div",{className:"container max-w-7xl mx-auto flex h-16 items-center justify-between px-4 md:px-6",children:[(0,t.jsxs)(s.default,{href:"/citizen/dashboard",className:"flex items-center gap-2",children:[(0,t.jsx)(x.default,{src:"/civiflow-logo.png",alt:"CivicFlow Logo",width:36,height:36,className:"object-contain"}),(0,t.jsx)("span",{className:"text-xl font-bold hidden sm:inline",children:"CivicFlow"})]}),(0,t.jsxs)("nav",{className:"flex items-center gap-6",children:[(0,t.jsx)(s.default,{href:"/citizen/dashboard",className:"text-sm font-medium hover:text-primary transition-colors",children:"Dashboard"}),(0,t.jsxs)(s.default,{href:"/civicbook",className:"text-sm font-medium hover:text-primary transition-colors flex items-center gap-1",children:[(0,t.jsx)(l.Home,{className:"h-4 w-4"}),"CivicBook"]}),(0,t.jsx)(s.default,{href:"/citizen/report",className:"text-sm font-medium hover:text-primary transition-colors",children:"Report Issue"}),(0,t.jsx)(s.default,{href:"/citizen/my-reports",className:"text-sm font-medium hover:text-primary transition-colors",children:"My Reports"}),(0,t.jsx)(s.default,{href:"/citizen/incentives",className:"text-sm font-medium hover:text-primary transition-colors",children:"Incentives"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:"relative",asChild:!0,children:(0,t.jsxs)(s.default,{href:"/citizen/notifications",children:[(0,t.jsx)(i.Bell,{className:"h-5 w-5"}),u>0&&(0,t.jsx)(c.Badge,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:u})]})}),(0,t.jsxs)(o.DropdownMenu,{children:[(0,t.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(a.User,{className:"h-5 w-5"})})}),(0,t.jsxs)(o.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,t.jsx)(o.DropdownMenuLabel,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Citizen Account"})]})}),(0,t.jsx)(o.DropdownMenuSeparator,{}),(0,t.jsx)(o.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(s.default,{href:"/citizen/profile",children:"Profile Settings"})}),(0,t.jsx)(o.DropdownMenuSeparator,{}),(0,t.jsxs)(o.DropdownMenuItem,{onClick:f,className:"text-destructive",children:[(0,t.jsx)(n.LogOut,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]}),(0,t.jsx)(h.RoleSwitcher,{})]})]})})}e.s(["NavHeader",()=>u])},61913,e=>{"use strict";var t=e.i(51537),s=e.i(64490),r=e.i(98121),i=e.i(9704),a=e.i(80486),n=e.i(43638),l=e.i(82397),o=e.i(42584),c=e.i(31161),d=e.i(8673),m=e.i(58987);function x(){let[e,x]=(0,m.useState)([]),[h,u]=(0,m.useState)(!0);(0,m.useEffect)(()=>{x((0,d.getReportsFromStorage)()),u(!1);let e=e=>{x(e.detail.reports)};return window.addEventListener("reportsUpdated",e),()=>{window.removeEventListener("reportsUpdated",e)}},[]);let p={submitted:"bg-blue-500/10 text-blue-700",assigned:"bg-purple-500/10 text-purple-700",in_progress:"bg-yellow-500/10 text-yellow-700",completed:"bg-green-500/10 text-green-700",verified:"bg-green-600/10 text-green-800",needs_human_review:"bg-orange-500/10 text-orange-700"},f={low:"bg-green-500/10 text-green-700",medium:"bg-yellow-500/10 text-yellow-700",high:"bg-orange-500/10 text-orange-700",critical:"bg-red-500/10 text-red-700"};return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(s.NavHeader,{userName:"Priya Sharma",unreadCount:0}),(0,t.jsx)("main",{className:"container px-4 md:px-6 py-8 max-w-7xl mx-auto",children:(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.CardTitle,{children:"मेरी रिपोर्ट / My Reports"}),(0,t.jsx)(r.CardDescription,{children:"All your civic issue submissions from localStorage"})]}),(0,t.jsx)(a.Button,{asChild:!0,children:(0,t.jsx)(n.default,{href:"/citizen/report",children:"Report New Issue"})})]})}),(0,t.jsx)(r.CardContent,{children:h?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading reports..."})}):e&&0!==e.length?(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)(n.default,{href:`/citizen/reports/${e.id}`,className:"flex items-start gap-4 p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[e.image_url?(0,t.jsx)("img",{src:e.image_url||"/placeholder.svg",alt:"Report",className:"w-20 h-20 rounded-md object-cover flex-shrink-0"}):(0,t.jsx)("div",{className:"w-20 h-20 rounded-md bg-muted flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(l.FileText,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("p",{className:"font-medium line-clamp-2",children:e.complaint_text}),(0,t.jsx)(i.Badge,{variant:"outline",className:p[e.status],children:e.status.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(o.MapPin,{className:"h-3 w-3"}),e.address||"Location pending"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.Calendar,{className:"h-3 w-3"}),new Date(e.created_at).toLocaleDateString()]}),e.category&&(0,t.jsx)(i.Badge,{variant:"secondary",children:e.category.replace("_"," ")}),e.severity_level&&(0,t.jsx)(i.Badge,{variant:"secondary",className:f[e.severity_level],children:e.severity_level})]}),e.ai_analysis&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["AI Confidence: ",Math.round(100*e.ai_analysis.confidence),"%"]})]})]},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(l.FileText,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"No reports yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Start making a difference by reporting your first issue"}),(0,t.jsx)(a.Button,{asChild:!0,children:(0,t.jsx)(n.default,{href:"/citizen/report",children:"Report an Issue"})})]})})]})})]})}e.s(["default",()=>x])}]);