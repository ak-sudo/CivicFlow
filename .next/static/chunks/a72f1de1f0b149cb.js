(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42584,e=>{"use strict";let t=(0,e.i(68385).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],42584)},42972,e=>{"use strict";var t=e.i(51537),a=e.i(52299);function r({className:e,type:r,...s}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>r])},8673,e=>{"use strict";let t="civicflow_reports";function a(){try{let e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch{return[]}}function r(e){try{let r=a();e.timeline||(e.timeline=[{id:`timeline_${Date.now()}`,action:"Report submitted",created_at:new Date().toISOString(),actor_name:e.profiles?.full_name||"Citizen",details:{category:e.category,severity:e.severity_level,ai_confidence:e.ai_analysis?.category_confidence}}]),r.unshift(e),localStorage.setItem(t,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{reports:r}}))}catch(e){console.error("Failed to save report to localStorage:",e)}}function s(e,r){try{let s=a(),n=s.findIndex(t=>t.id===e);if(-1!==n){if(r.status&&r.status!==s[n].status){let e={id:`timeline_${Date.now()}`,action:`Status changed to ${r.status}`,created_at:new Date().toISOString(),actor_name:"completed"===r.status?"Worker":"System"};s[n].timeline=s[n].timeline||[],s[n].timeline.unshift(e)}("completed"===r.status||"verified"===r.status)&&(r.verified_at=new Date().toISOString()),s[n]={...s[n],...r,updated_at:new Date().toISOString()},localStorage.setItem(t,JSON.stringify(s)),window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{reports:s}}))}}catch(e){console.error("Failed to update report in localStorage:",e)}}function n(e){return a().find(t=>t.id===e)||null}e.s(["getReportById",()=>n,"getReportsFromStorage",()=>a,"saveReportToStorage",()=>r,"updateReportInStorage",()=>s])},85258,e=>{"use strict";let t=(0,e.i(68385).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],85258)},82397,e=>{"use strict";let t=(0,e.i(68385).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],82397)},11255,7455,26668,28606,15887,74095,e=>{"use strict";var t=e.i(51537),a=e.i(43638),r=e.i(16221),s=e.i(52299),n=e.i(3908),i=e.i(68385);let l=(0,i.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=e.i(82397);let d=(0,i.default)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var c=e.i(85258),h=e.i(95658);let m=(0,i.default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);e.s(["Building2",()=>m],7455);let p=(0,i.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>p],26668);let x=(0,i.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>x],28606);let u=(0,i.default)("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);e.s(["ScrollText",()=>u],15887);var f=e.i(48489);function g(){let e=(0,r.usePathname)(),{t:i}=(0,f.useLanguage)(),g=[{name:i("admin.dashboard"),href:"/admin/dashboard",icon:l},{name:i("admin.reports"),href:"/admin/reports",icon:o.FileText},{name:i("admin.map"),href:"/admin/map",icon:d},{name:i("admin.review"),href:"/admin/review",icon:c.AlertCircle},{name:i("admin.workers"),href:"/admin/workers",icon:h.Users},{name:i("admin.departments"),href:"/admin/departments",icon:m},{name:i("admin.analytics"),href:"/admin/analytics",icon:p},{name:i("admin.audit"),href:"/admin/audit",icon:u},{name:i("admin.settings"),href:"/admin/settings",icon:x}];return(0,t.jsxs)("aside",{className:"hidden lg:flex flex-col w-64 pb-3 bg-muted/30 fixed h-screen overflow-y-auto",children:[(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.default,{src:"/civiflow-logo.png",alt:"CivicFlow Logo",width:36,height:36,className:"object-contain"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-lg",children:i("app.name")}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:i("admin.panel")})]})]})}),(0,t.jsx)("nav",{className:"flex-1 px-4 space-y-1",children:g.map(r=>{let n=e===r.href;return(0,t.jsxs)(a.default,{href:r.href,className:(0,s.cn)("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",n?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[(0,t.jsx)(r.icon,{className:"h-5 w-5"}),r.name]},r.href)})})]})}e.s(["AdminSidebar",()=>g],11255);var v=e.i(80486),j=e.i(42972),y=e.i(32749);let w=(0,i.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var N=e.i(87672),C=e.i(3305),b=e.i(14782),k=e.i(9704);let M=(0,i.default)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);function S(){let{language:e,setLanguage:a}=(0,f.useLanguage)();return(0,t.jsxs)(b.DropdownMenu,{children:[(0,t.jsx)(b.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(v.Button,{variant:"ghost",size:"icon",className:"relative",children:(0,t.jsx)(M,{className:"h-5 w-5"})})}),(0,t.jsxs)(b.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(b.DropdownMenuItem,{onClick:()=>a("en"),className:"en"===e?"bg-accent":"",children:"English"}),(0,t.jsx)(b.DropdownMenuItem,{onClick:()=>a("hi"),className:"hi"===e?"bg-accent":"",children:"हिंदी (Hindi)"})]})]})}var R=e.i(58987),T=e.i(8673),D=e.i(63565),P=e.i(2009),A=e.i(21359),_=e.i(16216),O=e.i(39858),F=e.i(58008),H=e.i(81701),E=e.i(85617),L=e.i(51550),z=e.i(84348),I=e.i(84085),B=e.i(67746),U=e.i(4541),$=e.i(26889),q=e.i(26452),V="Popover",[W,K]=(0,A.createContextScope)(V,[E.createPopperScope]),J=(0,E.createPopperScope)(),[Z,G]=W(V),Q=e=>{let{__scopePopover:a,children:r,open:s,defaultOpen:n,onOpenChange:i,modal:l=!1}=e,o=J(a),d=R.useRef(null),[c,h]=R.useState(!1),[m=!1,p]=(0,U.useControllableState)({prop:s,defaultProp:n,onChange:i});return(0,t.jsx)(E.Root,{...o,children:(0,t.jsx)(Z,{scope:a,contentId:(0,H.useId)(),triggerRef:d,open:m,onOpenChange:p,onOpenToggle:R.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:c,onCustomAnchorAdd:R.useCallback(()=>h(!0),[]),onCustomAnchorRemove:R.useCallback(()=>h(!1),[]),modal:l,children:r})})};Q.displayName=V;var X="PopoverAnchor";R.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,n=G(X,r),i=J(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=n;return R.useEffect(()=>(l(),()=>o()),[l,o]),(0,t.jsx)(E.Anchor,{...i,...s,ref:a})}).displayName=X;var Y="PopoverTrigger",ee=R.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,n=G(Y,r),i=J(r),l=(0,P.useComposedRefs)(a,n.triggerRef),o=(0,t.jsx)(I.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":eh(n.open),...s,ref:l,onClick:(0,D.composeEventHandlers)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:(0,t.jsx)(E.Anchor,{asChild:!0,...i,children:o})});ee.displayName=Y;var et="PopoverPortal",[ea,er]=W(et,{forceMount:void 0}),es=e=>{let{__scopePopover:a,forceMount:r,children:s,container:n}=e,i=G(et,a);return(0,t.jsx)(ea,{scope:a,forceMount:r,children:(0,t.jsx)(z.Presence,{present:r||i.open,children:(0,t.jsx)(L.Portal,{asChild:!0,container:n,children:s})})})};es.displayName=et;var en="PopoverContent",ei=R.forwardRef((e,a)=>{let r=er(en,e.__scopePopover),{forceMount:s=r.forceMount,...n}=e,i=G(en,e.__scopePopover);return(0,t.jsx)(z.Presence,{present:s||i.open,children:i.modal?(0,t.jsx)(el,{...n,ref:a}):(0,t.jsx)(eo,{...n,ref:a})})});ei.displayName=en;var el=R.forwardRef((e,a)=>{let r=G(en,e.__scopePopover),s=R.useRef(null),n=(0,P.useComposedRefs)(a,s),i=R.useRef(!1);return R.useEffect(()=>{let e=s.current;if(e)return(0,$.hideOthers)(e)},[]),(0,t.jsx)(q.RemoveScroll,{as:B.Slot,allowPinchZoom:!0,children:(0,t.jsx)(ed,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,D.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,D.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;i.current=2===t.button||a},{checkForDefaultPrevented:!1}),onFocusOutside:(0,D.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),eo=R.forwardRef((e,a)=>{let r=G(en,e.__scopePopover),s=R.useRef(!1),n=R.useRef(!1);return(0,t.jsx)(ed,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||r.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),ed=R.forwardRef((e,a)=>{let{__scopePopover:r,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:h,...m}=e,p=G(en,r),x=J(r);return(0,O.useFocusGuards)(),(0,t.jsx)(F.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:i,children:(0,t.jsx)(_.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:(0,t.jsx)(E.Content,{"data-state":eh(p.open),role:"dialog",id:p.contentId,...x,...m,ref:a,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ec="PopoverClose";function eh(e){return e?"open":"closed"}function em({...e}){return(0,t.jsx)(Q,{"data-slot":"popover",...e})}function ep({...e}){return(0,t.jsx)(ee,{"data-slot":"popover-trigger",...e})}function ex({className:e,align:a="center",sideOffset:r=4,...n}){return(0,t.jsx)(es,{children:(0,t.jsx)(ei,{"data-slot":"popover-content",align:a,sideOffset:r,className:(0,s.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...n})})}R.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,n=G(ec,r);return(0,t.jsx)(I.Primitive.button,{type:"button",...s,ref:a,onClick:(0,D.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=ec,R.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,n=J(r);return(0,t.jsx)(E.Arrow,{...n,...s,ref:a})}).displayName="PopoverArrow";var eu=e.i(22869);function ef({userName:e,unreadCount:a,onSearch:s}){let n=(0,r.useRouter)(),{t:i}=(0,f.useLanguage)(),[l,o]=(0,R.useState)(""),[d,c]=(0,R.useState)([]),[h,m]=(0,R.useState)(a||0);return(0,R.useEffect)(()=>{let e=()=>{let e=(0,T.getReportsFromStorage)().filter(e=>{let t=new Date(e.created_at);return(new Date().getTime()-t.getTime())/1e3/60<60}).map(e=>({id:e.id,title:`New Report: ${e.category||"Unknown"}`,message:e.complaint_text.slice(0,80)+"...",created_at:e.created_at,type:"new_report",severity:e.severity_level}));c(e),m(e.length)};e();let t=()=>{e()};return window.addEventListener("reportsUpdated",t),()=>window.removeEventListener("reportsUpdated",t)},[]),(0,t.jsx)("header",{className:"sticky top-0 z-40 border-b border-border bg-background",children:(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-4 flex-1 max-w-2xl",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&s(l)},className:"relative flex-1",children:[(0,t.jsx)(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(j.Input,{placeholder:i("search.placeholder"),className:"pl-9",value:l,onChange:e=>o(e.target.value)})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(S,{}),(0,t.jsxs)(em,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(v.Button,{variant:"ghost",size:"icon",className:"relative",children:[(0,t.jsx)(y.Bell,{className:"h-5 w-5"}),h>0&&(0,t.jsx)(k.Badge,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:h})]})}),(0,t.jsxs)(ex,{className:"w-80 p-0",align:"end",children:[(0,t.jsxs)("div",{className:"p-4 border-b",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Notifications"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[h," new notifications"]})]}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===d.length?(0,t.jsx)("div",{className:"p-8 text-center text-sm text-muted-foreground",children:"No new notifications"}):d.map(e=>(0,t.jsx)("div",{className:"p-4 border-b hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>n.push(`/admin/reports/${e.id}`),children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(y.Bell,{className:"h-4 w-4 text-primary mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleString()})]}),e.severity&&(0,t.jsx)(k.Badge,{variant:"secondary",className:"critical"===e.severity?"bg-red-500/10 text-red-700":"high"===e.severity?"bg-orange-500/10 text-orange-700":"bg-yellow-500/10 text-yellow-700",children:e.severity})]})},e.id))})]})]}),(0,t.jsxs)(b.DropdownMenu,{children:[(0,t.jsx)(b.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(v.Button,{variant:"ghost",className:"gap-2",children:[(0,t.jsx)(N.User,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"hidden md:inline",children:e})]})}),(0,t.jsxs)(b.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,t.jsx)(b.DropdownMenuLabel,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:i("admin.panel")})]})}),(0,t.jsx)(b.DropdownMenuSeparator,{}),(0,t.jsxs)(b.DropdownMenuItem,{onClick:()=>n.push("/"),className:"text-destructive",children:[(0,t.jsx)(C.LogOut,{className:"mr-2 h-4 w-4"}),i("action.logout")]})]})]}),(0,t.jsx)(eu.RoleSwitcher,{})]})]})})}e.s(["AdminTopNav",()=>ef],74095)},9803,e=>{"use strict";let t=(0,e.i(68385).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],9803)},31161,e=>{"use strict";let t=(0,e.i(68385).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],31161)},87571,e=>{"use strict";let t=(0,e.i(68385).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],87571)},15876,e=>{"use strict";let t=(0,e.i(68385).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],15876)},2332,e=>{"use strict";var t=e.i(51537),a=e.i(11255),r=e.i(74095),s=e.i(98121),n=e.i(26668),i=e.i(87571);let l=(0,e.i(68385).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var o=e.i(95658),d=e.i(9803),c=e.i(42584),h=e.i(31161),m=e.i(15876),p=e.i(48489),x=e.i(58987),u=e.i(8673);function f(){let{t:e}=(0,p.useLanguage)(),[f,g]=(0,x.useState)({totalReports:0,avgResolution:"0h",activeWorkers:0,satisfaction:0,topLocations:[],categoryBreakdown:[],monthlyTrend:[],severityBreakdown:[]});return(0,x.useEffect)(()=>{let e=(0,u.getReportsFromStorage)(),t=e.length>0?Math.max(1e4/e.length,100):100,a=e.length*t,r=e.filter(e=>"completed"===e.status||"verified"===e.status),s=24.5;r.length>0&&(s=r.reduce((e,t)=>{let a=new Date(t.created_at).getTime();return e+(new Date(t.verified_at||t.updated_at).getTime()-a)/36e5},0)/r.length);let n={};e.forEach(e=>{let t=e.address?.split(",")[0]||"Unknown";n[t]=(n[t]||0)+1});let i=Object.entries(n).sort((e,t)=>t[1]-e[1]).slice(0,5).map(([e,a],r)=>({area:e,reports:a*Math.floor(t/10),trend:r%2==0?`+${8+2*r}%`:`-${3+r}%`})),l={};e.forEach(e=>{l[e.category]=(l[e.category]||0)+1});let o=e.length||1,d=Object.entries(l).sort((e,t)=>t[1]-e[1]).map(([e,a])=>({name:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),count:a*Math.floor(t/10),percentage:Math.round(a/o*100)})),c={low:0,medium:0,high:0,critical:0};e.forEach(e=>{c[e.severity_level]=(c[e.severity_level]||0)+1});let h=Object.entries(c).map(([a,r])=>({level:a,count:r*Math.floor(t/10),percentage:Math.round(r/(e.length||1)*100)})),m=[{month:"Aug '24",count:Math.floor(.5*a),growth:12},{month:"Sep '24",count:Math.floor(.6*a),growth:18},{month:"Oct '24",count:Math.floor(.7*a),growth:15},{month:"Nov '24",count:Math.floor(.8*a),growth:22},{month:"Dec '24",count:Math.floor(.9*a),growth:28},{month:"Jan '25",count:a,growth:35}];g({totalReports:a,avgResolution:`${s.toFixed(1)}h`,activeWorkers:124,satisfaction:94,topLocations:i,categoryBreakdown:d,monthlyTrend:m,severityBreakdown:h})},[]),(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)(a.AdminSidebar,{}),(0,t.jsxs)("div",{className:"ml-64",children:[(0,t.jsx)(r.AdminTopNav,{userName:"सुनीता मेहता / Sunita Mehta"}),(0,t.jsx)("main",{className:"p-6 overflow-y-auto h-[calc(100vh-64px)]",children:(0,t.jsxs)("div",{className:"space-y-6 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:e("admin.analytics")}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Comprehensive insights from ",(f.totalReports/1e3).toFixed(1),"K+ reports"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Total Reports"}),(0,t.jsx)(n.BarChart3,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:f.totalReports.toLocaleString()}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[(0,t.jsx)(i.TrendingUp,{className:"h-3 w-3 text-green-500"})," +35% from last month"]})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Avg Resolution"}),(0,t.jsx)(d.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:f.avgResolution}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[(0,t.jsx)(l,{className:"h-3 w-3 text-green-500"})," 15% faster"]})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Active Workers"}),(0,t.jsx)(o.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:f.activeWorkers}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all departments"})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Satisfaction"}),(0,t.jsx)(i.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[f.satisfaction,"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Citizen satisfaction rate"})]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.MapPin,{className:"h-5 w-5"}),"Top Reporting Areas"]}),(0,t.jsx)(s.CardDescription,{children:"Hotspot areas with most civic issues"})]}),(0,t.jsx)(s.CardContent,{children:f.topLocations.length>0?(0,t.jsx)("div",{className:"space-y-4",children:f.topLocations.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold text-sm",children:a+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.area}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.reports," reports"]})]})]}),(0,t.jsx)("span",{className:`text-sm font-medium ${e.trend.startsWith("+")?"text-green-600":"text-red-600"}`,children:e.trend})]},a))}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No location data available"})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(n.BarChart3,{className:"h-5 w-5"}),"Report Categories"]}),(0,t.jsx)(s.CardDescription,{children:"Distribution by issue type"})]}),(0,t.jsx)(s.CardContent,{children:f.categoryBreakdown.length>0?(0,t.jsx)("div",{className:"space-y-4",children:f.categoryBreakdown.map((e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:[e.count," (",e.percentage,"%)"]})]}),(0,t.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary",style:{width:`${e.percentage}%`}})})]},a))}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No category data available"})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.AlertTriangle,{className:"h-5 w-5"}),"Severity Distribution"]}),(0,t.jsx)(s.CardDescription,{children:"Reports categorized by urgency level"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:f.severityBreakdown.map((e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"font-medium capitalize",children:e.level}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:[e.count," (",e.percentage,"%)"]})]}),(0,t.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${"critical"===e.level?"bg-red-500":"high"===e.level?"bg-orange-500":"medium"===e.level?"bg-yellow-500":"bg-green-500"}`,style:{width:`${e.percentage}%`}})})]},a))})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Calendar,{className:"h-5 w-5"}),"Monthly Growth Trend"]}),(0,t.jsx)(s.CardDescription,{children:"Report submissions over the past 6 months"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"h-[240px] flex items-end justify-around gap-2",children:f.monthlyTrend.map((e,a)=>(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"w-full bg-primary rounded-t-lg transition-all hover:bg-primary/80 cursor-pointer relative group",style:{height:`${e.count/Math.max(...f.monthlyTrend.map(e=>e.count))*100}%`,minHeight:"40px"},children:(0,t.jsxs)("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-popover text-popover-foreground px-2 py-1 rounded text-xs opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:[e.count.toLocaleString()," reports"]})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-xs font-medium",children:[(e.count/1e3).toFixed(1),"K"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.month}),(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["+",e.growth,"%"]})]})]},a))})})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-sm",children:"Daily Active Users"})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:"1.2L - 1.8L"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Peak traffic: 5-7 PM"})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-sm",children:"Response Rate"})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:"92.5%"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Reports addressed within SLA"})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-sm",children:"Platform Uptime"})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:"99.8%"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Last 30 days availability"})]})]})]})]})})]})]})}e.s(["default",()=>f],2332)}]);